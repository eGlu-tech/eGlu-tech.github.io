---
import { getCollection } from 'astro:content';
import '../../styles/global.css';
import '../../styles/index.css';
import './author.css';
import { blogName } from '../../constants.ts';
import Footer from '../../components/footer/Footer.astro';
import BaseHead from '../../components/base-head/BaseHead.astro';

export async function getStaticPaths() {
  const authors = await getCollection('author');
  return authors.map(author => ({
    params: { slug: author.id },
    props: { author },
  }));
}

const { author } = Astro.props;
const { Content } = await author.render();
const { name, github } = author.data;
---

<html lang="en">
	<BaseHead title={`${name} | ${blogName}`} />
	<body>
		<div class="container">
			<main>
				<header style="margin-bottom: 2rem;">
					<a href="/" class="brand-link">
						<h1>{blogName}</h1>
					</a>
					<div class="author-profile">
						<div class="author-header">
							<h2 class="author-name">{name}</h2>
							<a href={github} class="github-link" target="_blank" rel="noopener noreferrer">GitHub</a>
						</div>
						<div class="author-bio prose">
							<Content />
						</div>
					</div>
				</header>
			</main>

			<Footer />
		</div>
	</body>
</html>
